<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="fly.frontend.mapper.PostMapper">
    <resultMap id="postComment" type="fly.frontend.entity.PostComment">
        <id column="id" property="id"/>
        <result property="content" column="content"/>
        <result property="user.id" column="user_id"/>
        <result property="user.username" column="username" />
        <result property="user.avatar" column="userAvatar" />
    </resultMap>

    <update id="update" parameterType="fly.frontend.entity.Post">
        update posts set title = #{title},content = #{content},update_at = #{updateAt},publish_at = #{publishAt} where  id = #{id};
    </update>

    <select id="getCommentsByCommentIds" resultMap="postComment">
        select pc.*,u.username,u.avatar as userAvatar from post_comments as pc left join users as u on pc.user_id = u.id  where pc.id in
        <foreach collection="list" item="id" open="(" close=")" separator=",">
            #{id}
        </foreach>
    </select>
</mapper>